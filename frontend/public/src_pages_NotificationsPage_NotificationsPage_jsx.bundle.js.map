{"version":3,"file":"src_pages_NotificationsPage_NotificationsPage_jsx.bundle.js","mappings":"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","sources":["webpack://front/./src/pages/NotificationsPage/NotificationsPage.jsx","webpack://front/./src/services/axios.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport Typography from '@mui/material/Typography'\nimport { showHideLoading } from '../../store/Nav/NavActionsCreator'\nimport { useDispatch, useSelector } from 'react-redux'\nimport axios from '../../services/axios'\nimport { setListNotifications, changeReadNotification } from '../../store/Nav/NavActionsCreator'\nimport { Accordion, AccordionDetails, AccordionSummary, Button, CircularProgress } from '@mui/material'\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore'\nimport ControlPointIcon from '@mui/icons-material/ControlPoint'\n\n\nconst NotificationsPage = () => {\n  const dispatch = useDispatch()\n  const [btnMore, setBtnMore] = useState(<ControlPointIcon />)\n  const auth = useSelector( state => state.auth )\n  const notifications = useSelector( state => state.nav.listnotifications )\n  const current = useSelector(state => state.nav.listnotificationscurrentpage)\n  const next = useSelector(state => state.nav.listnotificationsnextpage)\n  \n\n  const tempGetData = useRef()\n  const getNotifications = async (page) => {\n    try {\n      dispatch(showHideLoading(true))\n      \n      const url = `/users/${auth.uid}/notifications${ (page ? '?page=' + page : '') }`\n      await axios.get(url)\n      .then( response => {\n        const data = response.data.data\n        dispatch(setListNotifications(data))\n      })\n      .catch(error => {\n        console.log('Error ' +error)\n      })\n      .finally(()=> {\n        dispatch(showHideLoading(false))\n      })\n    } catch(error) {\n    }\n  }\n  tempGetData.current = getNotifications\n\n\n  useEffect( () => {\n    tempGetData.current(0)\n  },[]) \n  \n\n\n\n\n  const moreNotifications = () => {\n    setBtnMore(<CircularProgress style={{color: \"#fff\"}} size={20} />)\n    getNotifications(next)\n    setBtnMore(<ControlPointIcon />)\n  }\n\n  const [expanded, setExpanded] = useState(false)\n  const handleChange = (panel) => (event, isExpanded) => {\n    setExpanded(isExpanded ? panel : false)\n  }\n\n  const readNotification = async (key) => {\n    try {\n      const url = `/users/${auth.uid}/notifications/${key}`\n      await axios.get(url)\n      .then( response => {\n        dispatch(changeReadNotification(key))\n      })\n      .catch(error => {\n        console.log('Error ' + error)\n      })\n    } catch(error) {\n      console.log('Error ' + error)\n    }\n  }\n\n\n  return (\n    <div>\n      <Typography variant=\"h3\" color=\"initial\">\n        Notificaciones\n      </Typography>\n\n\n      { notifications && notifications.map( (e) => {\n        const fecha =  new Date(Date.parse(e.createdAt))\n        const mes = fecha.getMonth() < 10 ? `0${fecha.getMonth()}` : fecha.getMonth()        \n        const dia = fecha.getDay() < 10 ? `0${fecha.getDay()}` : fecha.getDay()\n\n        const back = e.read ? '#f0f0f0' : '#ffffff'\n        return (\n          <Accordion \n            expanded={expanded === e.id } \n            key={e.id} \n            style={{marginBottom: \"10px\", background: back}} \n            onChange={handleChange(e.id)}\n          >\n            <AccordionSummary\n              expandIcon={<ExpandMoreIcon />}\n              aria-controls={`panel-${e.id}-content`}\n              onClick={() => readNotification(e.id)}\n            >\n              <Typography>{e.title} <span >{ `${fecha.getFullYear()}-${mes}-${dia}` }</span></Typography>\n            </AccordionSummary>\n            <AccordionDetails style={{paddingBottom: \"50px\"}}>\n              <div dangerouslySetInnerHTML={{__html: e.notification}} />\n            </AccordionDetails>\n          </Accordion>\n        )})\n      } \n\n\n\n      { current !== next && next !== null ? (\n        <div style={{marginTop: \"50px\", textAlign:\"center\"}}>\n          <Button\n            variant=\"contained\"\n            size=\"medium\"\n            onClick={moreNotifications}\n            startIcon={btnMore}\n            style={{color: '#ffffff'}}\n            >\n            Notificaciones\n          </Button>  \n        </div>\n\n      ) : ''}\n\n      \n      \n    </div>\n  )\n}\n\nexport default NotificationsPage\n","import axios from 'axios'\n\nconst instance = axios.create({\n  baseURL: process.env.REACT_APP_API_HOST\n})\n\ninstance.interceptors.request.use(function (config) {\n  if (window.localStorage.getItem('_token')) {\n    config.headers.Authorization = 'bearer ' + window.localStorage.getItem('_token')\n  }\n  return config\n}, function (error) {\n  return Promise.reject(error)\n})\n\nexport default instance\n"],"names":["React","useEffect","useRef","useState","Typography","showHideLoading","useDispatch","useSelector","axios","setListNotifications","changeReadNotification","Accordion","AccordionDetails","AccordionSummary","Button","CircularProgress","ExpandMoreIcon","ControlPointIcon","NotificationsPage","dispatch","btnMore","setBtnMore","auth","state","notifications","nav","listnotifications","current","listnotificationscurrentpage","next","listnotificationsnextpage","tempGetData","getNotifications","page","url","uid","get","then","response","data","catch","error","console","log","finally","moreNotifications","color","expanded","setExpanded","handleChange","panel","event","isExpanded","readNotification","key","map","e","fecha","Date","parse","createdAt","mes","getMonth","dia","getDay","back","read","id","marginBottom","background","title","getFullYear","paddingBottom","__html","notification","marginTop","textAlign","instance","create","baseURL","process","env","REACT_APP_API_HOST","interceptors","request","use","config","window","localStorage","getItem","headers","Authorization","Promise","reject"],"sourceRoot":""}